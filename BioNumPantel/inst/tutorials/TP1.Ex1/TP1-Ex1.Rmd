---
title: "R Cheatsheet pour débutants"
date: "Décembre 2016, Janvier 2026"
author: "Gabriel Alcaras, Jelena H. Pantel"
output: learnr::tutorial
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
library(learnr)
```

Ce document est à utiliser comme une table de référence, qui peut être consultée ponctuellement ou servir de support à des révisions.

# Généralités

## Opérateurs

| Opérateur | Rôle | Exemple |
| --- | --- | --- 
| `+` | Addition | `1+1` |
| `-` | Soustraction | `1-1` |
| `/` | Division | `1/1` |
| `*` | Multiplication | `1*1` |
| `^` | Puissance | `10^2` |

### Calculez sous R:

1,i. 137 + 25

```{r q1-1, exercise=TRUE}
# Entrez le code ici, puis exécutez
```

1,ii. 100 / 3

```{r q1-2, exercise=TRUE}
# Entrez le code ici, puis exécutez
```

1,iii. 10 - 9,8

```{r q1-3, exercise=TRUE}
# Entrez le code ici, puis exécutez
```

1,iv. 25,4 $\times$ 3

```{r q1-4, exercise=TRUE}
# Entrez le code ici, puis exécutez
```

## Symboles

| Symbole | Rôle | Exemple |
| --- | --- | --- 
| `<-` | Assignation à une variable | `animaux <- c("chien", "chat")` |
| `()` | Éxécution d'une fonction. Contient souvent des arguments | `c(1, 2, 3)` |
| `[]` | Sélection d'un sous-ensemble dans une variable | `animaux[1]` |
| `$` | Sélection d'une variable dans un data.frame | `bdd$genre` |
| `#` | Commentaire : ignorer ce qui suit | `# Test` |
| `=` | Assignation d'un argument dans une fonction | `mean(x, na.rm = TRUE)` |

### Exemples

```{r error=TRUE}
# Cette ligne n'est pas interprétée par R
c("chien", "chat") # Fonction
animaux <- c("chien", "chat") # Assignation dans la variable animaux
animaux[1] # Sélection du premier élément

# En revanche :
animaux(1)
```

### Exécuter dans R

2,i. Utilisez `c()` pour combiner les nombres 7, 3, et 10 (le résultat est appelé un *vecteur*)

```{r q2-1, exercise=TRUE,exercise.completion=FALSE}

```

2,ii. *1.* Assignez le vecteur (avec les valeurs 7, 3, and 10) à une nouvelle variable appelée `new_var` (utilisez le symbole `<-`). *2.* Puis indexer (avec de `[ ]`) le deuxième élément de `new_var`.

```{r q2-2, exercise=TRUE,exercise.completion=FALSE}

```

2,iii. Utilisez les opérateurs (`+`, `/`, etc) pour calculer la moyenne de 7, 3, et 10.

```{r q2-3, exercise=TRUE,exercise.completion=FALSE}

```

## R est sensible à la casse

Attention aux appels de fonction :

```{r error=TRUE}
factor(c("chien", "chat"))

# Mais...
Factor(c("chien", "chat"))
```

Et aux appels de variable :

```{r error=TRUE}
animaux <- c("chien", "chat")
animaux

# Mais...
Animaux
```

# Structures de données

## Types de données

Pour identifier un type de données, on peut utiliser la fonction `typeof()`.

| Notation | Rôle | Exemple |
| --- | --- | --- 
| `1234` | Un nombre ("double") | `1` |
| `""` ou `''` | Chaîne de caractères | `"animaux"` |
| `NA` | Absence de données | `NA` |

Résultats de la fonction `typeof()` :

```{r}
typeof(1)
typeof("1")
typeof(NA)
```

**Le type de données doit être bien compris sous peine d'erreurs !**

```{r error=TRUE}
1+1
# Mais...
1+"1"
```

## Structures de données

Pour identifier une structure de données, on peut utiliser la fonction `str()`.

| Nom | Fonction | Concept équivalent en statistiques |
| --- | --- | --- 
| vector | `c()` | Variable |
| factor | `factor()` | Variable qualitative |
| data.frame | `data.frame()` | Base de données |

### Vecteur

| Dans R | En statistiques |
| --- | --- |
| vector | Variable |
| Suite de données de même type | Série de données homogènes |

```{r}
c(1,2,3,4) # Équivalent à une variable quantitative
str(c(1,2,3,4))
c("homme", "femme", "homme") # Série de données textuelles
str(c("homme", "femme", "homme"))
```

**Manipulation des vecteurs :**

```{r}
genre <- c("homme", "femme", "homme")
genre[1]
genre[1:2]
genre[c(1, 3)]
```

### Data.frame

C'est l'équivalent d'une base de données en statistiques : une série de variables sur les mêmes individus.

Pour sélectionner une variable en particulier :

```{r, eval=FALSE}
bdd$variable1
```

Tapez le code ci-dessous (ou copier-coller) pour créer un dataframe, enregistré dans la variable `d`. Utilisez ensuite `$` pour sélectionner la variable `x` :

```{r eval=FALSE}
L3 <- LETTERS[1:3]
char <- sample(L3, 10, replace = TRUE)
d <- data.frame(x = 1, y = 1:10, char = char)
d
```

```{r q3-1, exercise=TRUE,exercise.completion=FALSE}

```

# Les fonctions

Les fonctions sont un concept central des langages de programmation... et donc de R !

## Anatomie d'une fonction

Toujours sous la forme :

```
nomDeLaFonction(arguments)
```

+ `nomDeLaFonction` : **nom de la fonction à appeler**
+ `()` : les parenthèes signifient qu'**on demande à R d'éxécuter la fonction**.
+ `arguments` : une liste d'arguments séparés par des virgules et une espace. Le nombre d'arguments dépend des fonctions.

### Les arguments

Fonction qui n'a besoin d'aucun argument :

```{r}
getwd()
```

La fonction `c()` accepte un nombre illimité d'arguments :

```{r}
c(1, 2, 3, 4)
```

Certaines fonctions ont des arguments obligatoires :

```{r error=TRUE}
mean()
```

Mais :

```{r}
notes <- c(10, 20)
mean(notes)
```

Certaines fonctions prennent des arguments falcutatifs, qui peuvent être nommés. Dans ce cas, le nom de l'argument est suivi d'un signe `=` puis de sa valeur.

```{r}
notes <- c(10, 20, NA)
mean(notes, na.rm = TRUE)
```

Utilisez la commande `mean` pour calculer la moyenne de 7, 3 et 10. N'oubliez pas d'utiliser `c()` pour combiner les valeurs.

```{r q4-1, exercise=TRUE,exercise.completion=FALSE}

```

Il est également possible de combiner des commandes et d'ajouter des arguments :

```{r}
sqrt(71)
```

```{r}
round(sqrt(71))
```

```{r}
round(sqrt(71),digits=1)
```

Calculez sous R la racine carrée (`sqrt`) de : pi (`pi`) multiplié (`*`) par 18. Arrondissez (`round`) la valeur obtenue à 1 décimale (`digits=1`).

```{r q5-1, exercise=TRUE,exercise.completion=FALSE}

```

